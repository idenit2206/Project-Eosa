<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.eosa.admin.mapper.NoticeMapper">

    <insert id="insertNotice" parameterType="NoticeDTO">
        INSERT INTO Notice (idx,
                            title,
                            content,
                            author,
                            postDate)
        VALUES (#{idx},
                #{title},
                #{content},
                #{author},
                NOW())
    </insert>

    <select id="countNoticeList" resultType="int">
        SELECT COUNT(*)
        FROM Notice N
    </select>

    <select id="selectNoticeList" resultType="NoticeDTO" parameterType="hashmap">
        SELECT
            N.idx,
            N.title,
            N.content,
            N.author,
            N.postDate
        FROM Notice N
        ORDER BY N.postDate DESC LIMIT #{startIndex}, #{pageSize}
    </select>

    <select id="noticeDetails" resultType="NoticeDTO"  parameterType="Long">
        SELECT
            N.idx,
            N.title,
            N.content,
            N.author,
            N.postDate
        FROM Notice N
        WHERE N.idx = #{idx}
    </select>
    
    <update id="updateNoticeByNoticeIdx" parameterType="NoticeDTO">
        UPDATE Notice N SET N.title = #{title}, N.content = #{content} WHERE N.idx = #{idx}
    </update>

    <delete id="deleteByNoticeIdx" parameterType="Long">
        DELETE FROM Notice WHERE idx = #{idx}
    </delete>

</mapper>